<div class="flex items-start justify-between gap-4">
  <div>
    <h1 class="text-xl font-semibold">Personas creadas</h1>
  </div>

  <button (click)="load()"
          class="rounded-xl border bg-white px-4 py-2 text-sm hover:bg-slate-50">
    Recargar
  </button>
</div>

<div *ngIf="error" class="mt-4 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700">
  {{ error }}
</div>

<div class="mt-6 bg-white border rounded-2xl shadow-sm overflow-hidden">
  <div *ngIf="loading" class="p-6 text-sm text-slate-600">Cargando...</div>

  <div *ngIf="!loading" class="overflow-x-auto">
    <table class="min-w-full text-sm">
      <thead class="bg-slate-50 text-slate-600">
        <tr>
          <th class="text-left font-medium px-4 py-3">ID</th>
          <th class="text-left font-medium px-4 py-3">Nombre</th>
          <th class="text-left font-medium px-4 py-3">Identificación</th>
          <th class="text-left font-medium px-4 py-3">Email</th>
          <th class="text-left font-medium px-4 py-3">Creación</th>
        </tr>
      </thead>

      <tbody class="divide-y">
        <tr *ngFor="let p of persons" class="hover:bg-slate-50">
          <td class="px-4 py-3">{{ p.id }}</td>
          <td class="px-4 py-3">
            <div class="font-medium">{{ p.fullName || (p.name + ' ' + p.lastName) }}</div>
            <div class="text-xs text-slate-500">{{ p.identificationType }} - {{ p.identification }}</div>
          </td>
          <td class="px-4 py-3">
            {{ p.fullIdentification || (p.identificationType + '-' + p.identification) }}
          </td>
          <td class="px-4 py-3">{{ p.email }}</td>
          <td class="px-4 py-3 text-slate-600">{{ p.createdAt | date:'yyyy-MM-dd HH:mm' }}</td>
        </tr>

        <tr *ngIf="persons.length === 0">
          <td colspan="5" class="px-4 py-6 text-center text-slate-500">
            No hay registros.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
